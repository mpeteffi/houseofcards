CREATE TABLE CANDIDATO
  (
    IdCandidato       INTEGER NOT NULL ,
    Nome              VARCHAR2 (250) NOT NULL ,
    Email             VARCHAR2 (250) NOT NULL ,
    InstituicaoEnsino VARCHAR2 (250) NOT NULL ,
    Curso             VARCHAR2 (250) NOT NULL ,
    PrevisaoFormatura VARCHAR2 (30) NOT NULL ,
    Status            VARCHAR2 (50) NOT NULL
  ) ;
CREATE INDEX CANDIDATO_IDX ON CANDIDATO
  ( IdCandidato ASC
  ) ;
CREATE INDEX EMAIL_IDXv2 ON CANDIDATO
  ( Email ASC
  ) ;
CREATE INDEX STATUS_IDX ON CANDIDATO
  ( Status ASC
  ) ;
CREATE INDEX NOME_IDX ON CANDIDATO
  ( Nome ASC
  ) ;
ALTER TABLE CANDIDATO ADD CONSTRAINT CANDIDATOS_PK PRIMARY KEY ( IdCandidato ) ;
ALTER TABLE CANDIDATO ADD CONSTRAINT CANDIDATO_UN UNIQUE ( Email ) ;


CREATE TABLE ENTREVISTA
  (
    IdEntrevista   INTEGER NOT NULL ,
    DataEntrevista DATE NOT NULL ,
    ParecerRH      VARCHAR2 (4000) NOT NULL ,
    ParecerTecnico VARCHAR2 (4000) NOT NULL ,
    ProvaG36       NUMBER (3,1) ,
    ProvaAC        NUMBER (3,1) ,
    ProvaTecnica   NUMBER (3,1) ,
    IdCandidato    INTEGER NOT NULL ,
    IdUsuario      INTEGER NOT NULL
  ) ;
CREATE INDEX ENTREVISTA_IDX ON ENTREVISTA
  ( IdEntrevista ASC
  ) ;
CREATE INDEX ENTREVISTA_CANDIDATO_IDX ON ENTREVISTA
  ( IdCandidato ASC
  ) ;
CREATE INDEX ENTREVISTA_USUARIO_IDX ON ENTREVISTA
  ( IdUsuario ASC
  ) ;
ALTER TABLE ENTREVISTA ADD CONSTRAINT ENTREVISTA_PK PRIMARY KEY ( IdEntrevista ) ;
ALTER TABLE ENTREVISTA ADD CONSTRAINT AC_UN UNIQUE ( ProvaAC , IdCandidato ) ;
ALTER TABLE ENTREVISTA ADD CONSTRAINT G36_UN UNIQUE ( ProvaG36 , IdCandidato ) ;
ALTER TABLE ENTREVISTA ADD CONSTRAINT Tecnica_UN UNIQUE ( ProvaTecnica , IdCandidato ) ;


CREATE TABLE INFORMACAO
  (
    IdInformacao       INTEGER NOT NULL ,
    Telefone           VARCHAR2 (20) NOT NULL ,
    DataNascimento     DATE NOT NULL ,
    Cidade             VARCHAR2 (250) NOT NULL ,
    UrlLinkedin        VARCHAR2 (250) NOT NULL ,
    Senha              VARCHAR2 (250) NOT NULL ,
    IdCandidato        INTEGER NOT NULL ,
    IdProcessoSeletivo INTEGER NOT NULL
  ) ;
CREATE INDEX INFORMACAO_IDX ON INFORMACAO
  ( IdInformacao ASC
  ) ;
CREATE INDEX CANDIDATO_IDXv2 ON INFORMACAO
  ( IdCandidato ASC
  ) ;
CREATE INDEX PROCESSOSELETIVO_IDXv1 ON INFORMACAO
  ( IdProcessoSeletivo ASC
  ) ;
CREATE INDEX TELEFONE_IDX ON INFORMACAO
  ( Telefone ASC
  ) ;
ALTER TABLE INFORMACAO ADD CONSTRAINT INTERESSADO_PK PRIMARY KEY ( IdInformacao ) ;
ALTER TABLE INFORMACAO ADD CONSTRAINT INFORMACAO_UN UNIQUE ( IdCandidato , IdProcessoSeletivo ) ;


CREATE TABLE PROCESSOSELETIVO
  (
    IdProcessoSeletivo INTEGER NOT NULL ,
    Edicao             VARCHAR2 (10) NOT NULL ,
    InicioSelecao      DATE NOT NULL ,
    FinalSelecao       DATE NOT NULL ,
    InicioAula         DATE NOT NULL ,
    FinalAula          DATE NOT NULL
  ) ;
CREATE INDEX PROCESSOSELETIVO_IDX ON PROCESSOSELETIVO
  (
    IdProcessoSeletivo ASC
  ) ;
CREATE INDEX EDICAO_IDX ON PROCESSOSELETIVO
  ( Edicao ASC
  ) ;
ALTER TABLE PROCESSOSELETIVO ADD CONSTRAINT PROCESSOSELETIVO_PK PRIMARY KEY ( IdProcessoSeletivo ) ;
ALTER TABLE PROCESSOSELETIVO ADD CONSTRAINT PROCESSOSELETIVO_UN UNIQUE ( Edicao ) ;


CREATE TABLE TOKEN
  (
    IdToken         INTEGER NOT NULL ,
    IdParaConfirmar INTEGER NOT NULL ,
    Token           VARCHAR2 (400) NOT NULL ,
    Status          VARCHAR2 (30) NOT NULL ,
    Tipo            VARCHAR2 (30) NOT NULL
  ) ;
CREATE INDEX IDTOKEN_IDX ON TOKEN
  ( IdToken ASC
  ) ;
CREATE INDEX TOKENSTRING_IDX ON TOKEN
  ( Token ASC
  ) ;
CREATE INDEX STATUS_IDXv1 ON TOKEN
  ( Status ASC
  ) ;
CREATE INDEX TIPO_IDX ON TOKEN
  ( Tipo ASC
  ) ;
ALTER TABLE TOKEN ADD CONSTRAINT TOKEN_PK PRIMARY KEY ( IdToken ) ;
ALTER TABLE TOKEN ADD CONSTRAINT TOKEN_UN UNIQUE ( Token ) ;


CREATE TABLE USUARIO
  (
    IdUsuario INTEGER NOT NULL ,
    Nome      VARCHAR2 (250) NOT NULL ,
    Email     VARCHAR2 (250) NOT NULL ,
    Senha     VARCHAR2 (400) NOT NULL ,
    Imagem    VARCHAR2 (400) NOT NULL
  ) ;
CREATE INDEX USUARIO_IDX ON USUARIO
  ( IdUsuario ASC
  ) ;
CREATE INDEX EMAIL_IDX ON USUARIO
  ( Email ASC
  ) ;
ALTER TABLE USUARIO ADD CONSTRAINT USUARIO_PK PRIMARY KEY ( IdUsuario ) ;
ALTER TABLE USUARIO ADD CONSTRAINT USUARIO_UN UNIQUE ( Email ) ;


ALTER TABLE ENTREVISTA ADD CONSTRAINT CANDIDATOENTREVISTA_FK FOREIGN KEY ( IdCandidato ) REFERENCES CANDIDATO ( IdCandidato ) ;

ALTER TABLE INFORMACAO ADD CONSTRAINT INFORMACAO_CANDIDATO_FK FOREIGN KEY ( IdCandidato ) REFERENCES CANDIDATO ( IdCandidato ) ;

ALTER TABLE INFORMACAO ADD CONSTRAINT INFORMACAO_PROCESSOSELETIVO_FK FOREIGN KEY ( IdProcessoSeletivo ) REFERENCES PROCESSOSELETIVO ( IdProcessoSeletivo ) ;

ALTER TABLE ENTREVISTA ADD CONSTRAINT USUARIOENTREVISTA_FK FOREIGN KEY ( IdUsuario ) REFERENCES USUARIO ( IdUsuario ) ;

CREATE SEQUENCE CANDIDATO_IdCandidato_SEQ START WITH 1 NOCACHE ORDER ;
CREATE OR REPLACE TRIGGER CANDIDATO_IdCandidato_TRG BEFORE
  INSERT ON CANDIDATO FOR EACH ROW WHEN (NEW.IdCandidato IS NULL) BEGIN :NEW.IdCandidato := CANDIDATO_IdCandidato_SEQ.NEXTVAL;
END;
/

CREATE SEQUENCE ENTREVISTA_IdEntrevista_SEQ START WITH 1 NOCACHE ORDER ;
CREATE OR REPLACE TRIGGER ENTREVISTA_IdEntrevista_TRG BEFORE
  INSERT ON ENTREVISTA FOR EACH ROW WHEN (NEW.IdEntrevista IS NULL) BEGIN :NEW.IdEntrevista := ENTREVISTA_IdEntrevista_SEQ.NEXTVAL;
END;
/

CREATE SEQUENCE INFORMACAO_IdInformacao_SEQ START WITH 1 NOCACHE ORDER ;
CREATE OR REPLACE TRIGGER INFORMACAO_IdInformacao_TRG BEFORE
  INSERT ON INFORMACAO FOR EACH ROW WHEN (NEW.IdInformacao IS NULL) BEGIN :NEW.IdInformacao := INFORMACAO_IdInformacao_SEQ.NEXTVAL;
END;
/

CREATE SEQUENCE PROCESSOSELETIVO_IdProcessoSel START WITH 1 NOCACHE ORDER ;
CREATE OR REPLACE TRIGGER PROCESSOSELETIVO_IdProcessoSel BEFORE
  INSERT ON PROCESSOSELETIVO FOR EACH ROW WHEN (NEW.IdProcessoSeletivo IS NULL) BEGIN :NEW.IdProcessoSeletivo := PROCESSOSELETIVO_IdProcessoSel.NEXTVAL;
END;
/

CREATE SEQUENCE TOKEN_IdToken_SEQ START WITH 1 NOCACHE ORDER ;
CREATE OR REPLACE TRIGGER TOKEN_IdToken_TRG BEFORE
  INSERT ON TOKEN FOR EACH ROW WHEN (NEW.IdToken IS NULL) BEGIN :NEW.IdToken := TOKEN_IdToken_SEQ.NEXTVAL;
END;
/

CREATE SEQUENCE USUARIO_IdUsuario_SEQ START WITH 1 NOCACHE ORDER ;
CREATE OR REPLACE TRIGGER USUARIO_IdUsuario_TRG BEFORE
  INSERT ON USUARIO FOR EACH ROW WHEN (NEW.IdUsuario IS NULL) BEGIN :NEW.IdUsuario := USUARIO_IdUsuario_SEQ.NEXTVAL;
END;
/